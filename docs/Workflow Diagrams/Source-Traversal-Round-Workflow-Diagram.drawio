<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36" version="26.1.1">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
    <mxGraphModel dx="1562" dy="810" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-2" value="" style="rounded=0;html=1;jettySize=auto;orthogonalLoop=1;fontSize=11;endArrow=block;endFill=0;endSize=8;strokeWidth=1;shadow=0;labelBackgroundColor=none;edgeStyle=orthogonalEdgeStyle;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WIyWlLk6GJQsqaUBKTNV-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="220" y="170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-3" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;User selects their root folder for source traversal and we write it to the DB. Trigger Queue Publisher to grab the last folder&#39;s identifier from the root.&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="135" y="40" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-4" value="" style="rounded=0;html=1;jettySize=auto;orthogonalLoop=1;fontSize=11;endArrow=block;endFill=0;endSize=8;strokeWidth=1;shadow=0;labelBackgroundColor=none;edgeStyle=orthogonalEdgeStyle;" parent="WIyWlLk6GJQsqaUBKTNV-1" target="WIyWlLk6GJQsqaUBKTNV-10" edge="1">
          <mxGeometry x="0.0372" y="120" relative="1" as="geometry">
            <mxPoint x="119" y="-111" as="offset" />
            <mxPoint x="220" y="250" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-7" value="QP publishes the traversal tasks into the queue for the worker(s) to list its / their contents" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="160" y="170" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-9" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;jettySize=auto;orthogonalLoop=1;fontSize=11;endArrow=block;endFill=0;endSize=8;strokeWidth=1;shadow=0;labelBackgroundColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WIyWlLk6GJQsqaUBKTNV-10" target="WIyWlLk6GJQsqaUBKTNV-12" edge="1">
          <mxGeometry y="10" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WIyWlLk6GJQsqaUBKTNV-10" target="WIyWlLk6GJQsqaUBKTNV-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WIyWlLk6GJQsqaUBKTNV-10" target="j26-iwje3XcPhzFr8ipr-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-10" value="Was the traversal successful?" style="rhombus;whiteSpace=wrap;html=1;shadow=0;fontFamily=Helvetica;fontSize=12;align=center;strokeWidth=1;spacing=6;spacingTop=-4;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="170" y="290" width="100" height="80" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WIyWlLk6GJQsqaUBKTNV-12" target="WIyWlLk6GJQsqaUBKTNV-7">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="620" y="200" as="targetPoint" />
            <Array as="points">
              <mxPoint x="680" y="330" />
              <mxPoint x="680" y="190" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-12" value="Log the errors, increment attempt counter, QP will queue it up again for a retry" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="320" y="280" width="120" height="100" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-3" value="This is if we need to queue it up again (if below retry count threshold)&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="290" y="163" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="j26-iwje3XcPhzFr8ipr-4" target="j26-iwje3XcPhzFr8ipr-16">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-4" value="List out the folders. Apply path filtering logic to ALL items, only log which items succeed." style="whiteSpace=wrap;html=1;rounded=1;glass=0;strokeWidth=1;shadow=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="160" y="540" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="j26-iwje3XcPhzFr8ipr-7" target="j26-iwje3XcPhzFr8ipr-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="j26-iwje3XcPhzFr8ipr-7" target="j26-iwje3XcPhzFr8ipr-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-7" value="Was the folder empty?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="150" y="390" width="140" height="120" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-9" value="Yes" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="220" y="360" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-11" value="No" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="220" y="508" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-13" value="The root folder is empty. There is nothing to migrate over. End of src traversal." style="whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="320" y="395" width="120" height="110" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-15" value="Yes" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="280" y="420" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="j26-iwje3XcPhzFr8ipr-16" target="j26-iwje3XcPhzFr8ipr-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-16" value="Of the folders that succeeded in the filtering checks, They will be queued up to have their contents listed in the next round." style="whiteSpace=wrap;html=1;rounded=1;glass=0;strokeWidth=1;shadow=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="135" y="680" width="170" height="110" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="j26-iwje3XcPhzFr8ipr-18" target="j26-iwje3XcPhzFr8ipr-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-26" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="j26-iwje3XcPhzFr8ipr-18" target="j26-iwje3XcPhzFr8ipr-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-18" value="Traversed all folders&lt;div&gt;&amp;nbsp;at this level?&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;rounded=1;glass=0;strokeWidth=1;shadow=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="140" y="820" width="160" height="160" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.002;entryY=0.655;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="j26-iwje3XcPhzFr8ipr-21" target="j26-iwje3XcPhzFr8ipr-3">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="740" y="190" as="targetPoint" />
            <Array as="points">
              <mxPoint x="680" y="900" />
              <mxPoint x="680" y="189" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-21" value="End of round. Increase round count by 1 start the next round. Same process." style="whiteSpace=wrap;html=1;rounded=1;glass=0;strokeWidth=1;shadow=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="354" y="870" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-23" value="Yes" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="310" y="868" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-25" value="Keep applying the same logic to every folder at this level. QP will keep publishing new tasks as we get low on tasks until the query runs dry (no more folders left to traverse at this level)." style="whiteSpace=wrap;html=1;rounded=1;glass=0;strokeWidth=1;shadow=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="130" y="1010" width="180" height="150" as="geometry" />
        </mxCell>
        <mxCell id="j26-iwje3XcPhzFr8ipr-27" value="No" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="220" y="968" width="40" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
